import { useEffect, useState } from "react";
import GlassCard from "@components/GlassCard";
import styles from './ContributorsCreditsCard.module.css';

export default function ContributorsCreditsCard() {
	const [contributors, setContributors] = useState([]);

	useEffect(() => {
		//setContributors(mockContributors);
		fetch("https://api.github.com/repos/Ryan-Millard/Img2Num/contributors?per_page=78")
			.then(res => res.json())
			.then(data => setContributors(data || []));
	}, []);

	const chunk = (arr, size) =>
		Array.from({ length: Math.ceil(arr.length / size) }, (_, i) =>
			arr.slice(i * size, i * size + size)
		);

	// Try splitting approximately into 2ΓÇô3 tables depending on count
	const chunkSize = 13;
	const tables = chunk(contributors, chunkSize);

	return (
		<GlassCard>
			<h2>Contributors</h2>

			<div className={styles.contributorsGrid}>
				{tables.map((group, i) => (
					<table key={i}>
						<tbody>
							{group.map(c => (
								<tr key={c.id}>
									<td>
										<a href={c.html_url} target="_blank">
											<img
												src={c.avatar_url}
												alt={c.login}
												width="28"
												height="28"
												style={{ borderRadius: "50%" }}
											/>
										</a>
									</td>
									<td><a href={c.html_url} target="_blank">{c.login}</a></td>
									<td>{c.contributions} commits</td>
								</tr>
							))}
						</tbody>
					</table>
				))}
			</div>
		</GlassCard>
	);
}

//const mockContributors = [ { "login": "user1", "id": 1, "avatar_url": "https://avatars.githubusercontent.com/u/1?v=4", "html_url": "https://github.com/user1", "contributions": 120 }, { "login": "user2", "id": 2, "avatar_url": "https://avatars.githubusercontent.com/u/2?v=4", "html_url": "https://github.com/user2", "contributions": 98 }, { "login": "user3", "id": 3, "avatar_url": "https://avatars.githubusercontent.com/u/3?v=4", "html_url": "https://github.com/user3", "contributions": 87 }, { "login": "user4", "id": 4, "avatar_url": "https://avatars.githubusercontent.com/u/4?v=4", "html_url": "https://github.com/user4", "contributions": 80 }, { "login": "user5", "id": 5, "avatar_url": "https://avatars.githubusercontent.com/u/5?v=4", "html_url": "https://github.com/user5", "contributions": 75 }, { "login": "user6", "id": 6, "avatar_url": "https://avatars.githubusercontent.com/u/6?v=4", "html_url": "https://github.com/user6", "contributions": 70 }, { "login": "user7", "id": 7, "avatar_url": "https://avatars.githubusercontent.com/u/7?v=4", "html_url": "https://github.com/user7", "contributions": 66 }, { "login": "user8", "id": 8, "avatar_url": "https://avatars.githubusercontent.com/u/8?v=4", "html_url": "https://github.com/user8", "contributions": 63 }, { "login": "user9", "id": 9, "avatar_url": "https://avatars.githubusercontent.com/u/9?v=4", "html_url": "https://github.com/user9", "contributions": 61 }, { "login": "user10", "id": 10, "avatar_url": "https://avatars.githubusercontent.com/u/10?v=4", "html_url": "https://github.com/user10", "contributions": 59 }, { "login": "user11", "id": 11, "avatar_url": "https://avatars.githubusercontent.com/u/11?v=4", "html_url": "https://github.com/user11", "contributions": 57 }, { "login": "user12", "id": 12, "avatar_url": "https://avatars.githubusercontent.com/u/12?v=4", "html_url": "https://github.com/user12", "contributions": 55 }, { "login": "user13", "id": 13, "avatar_url": "https://avatars.githubusercontent.com/u/13?v=4", "html_url": "https://github.com/user13", "contributions": 53 }, { "login": "user14", "id": 14, "avatar_url": "https://avatars.githubusercontent.com/u/14?v=4", "html_url": "https://github.com/user14", "contributions": 51 }, { "login": "user15", "id": 15, "avatar_url": "https://avatars.githubusercontent.com/u/15?v=4", "html_url": "https://github.com/user15", "contributions": 49 }, { "login": "user16", "id": 16, "avatar_url": "https://avatars.githubusercontent.com/u/16?v=4", "html_url": "https://github.com/user16", "contributions": 48 }, { "login": "user17", "id": 17, "avatar_url": "https://avatars.githubusercontent.com/u/17?v=4", "html_url": "https://github.com/user17", "contributions": 46 }, { "login": "user18", "id": 18, "avatar_url": "https://avatars.githubusercontent.com/u/18?v=4", "html_url": "https://github.com/user18", "contributions": 45 }, { "login": "user19", "id": 19, "avatar_url": "https://avatars.githubusercontent.com/u/19?v=4", "html_url": "https://github.com/user19", "contributions": 43 }, { "login": "user20", "id": 20, "avatar_url": "https://avatars.githubusercontent.com/u/20?v=4", "html_url": "https://github.com/user20", "contributions": 42 }, { "login": "user21", "id": 21, "avatar_url": "https://avatars.githubusercontent.com/u/21?v=4", "html_url": "https://github.com/user21", "contributions": 41 }, { "login": "user22", "id": 22, "avatar_url": "https://avatars.githubusercontent.com/u/22?v=4", "html_url": "https://github.com/user22", "contributions": 39 }, { "login": "user23", "id": 23, "avatar_url": "https://avatars.githubusercontent.com/u/23?v=4", "html_url": "https://github.com/user23", "contributions": 38 }, { "login": "user24", "id": 24, "avatar_url": "https://avatars.githubusercontent.com/u/24?v=4", "html_url": "https://github.com/user24", "contributions": 37 }, { "login": "user25", "id": 25, "avatar_url": "https://avatars.githubusercontent.com/u/25?v=4", "html_url": "https://github.com/user25", "contributions": 35 }, { "login": "user26", "id": 26, "avatar_url": "https://avatars.githubusercontent.com/u/26?v=4", "html_url": "https://github.com/user26", "contributions": 34 }, { "login": "user27", "id": 27, "avatar_url": "https://avatars.githubusercontent.com/u/27?v=4", "html_url": "https://github.com/user27", "contributions": 33 }, { "login": "user28", "id": 28, "avatar_url": "https://avatars.githubusercontent.com/u/28?v=4", "html_url": "https://github.com/user28", "contributions": 32 }, { "login": "user29", "id": 29, "avatar_url": "https://avatars.githubusercontent.com/u/29?v=4", "html_url": "https://github.com/user29", "contributions": 31 }, { "login": "user30", "id": 30, "avatar_url": "https://avatars.githubusercontent.com/u/30?v=4", "html_url": "https://github.com/user30", "contributions": 30 }, { "login": "user31", "id": 31, "avatar_url": "https://avatars.githubusercontent.com/u/31?v=4", "html_url": "https://github.com/user31", "contributions": 29 }, { "login": "user32", "id": 32, "avatar_url": "https://avatars.githubusercontent.com/u/32?v=4", "html_url": "https://github.com/user32", "contributions": 28 }, { "login": "user33", "id": 33, "avatar_url": "https://avatars.githubusercontent.com/u/33?v=4", "html_url": "https://github.com/user33", "contributions": 27 }, { "login": "user34", "id": 34, "avatar_url": "https://avatars.githubusercontent.com/u/34?v=4", "html_url": "https://github.com/user34", "contributions": 26 }, { "login": "user35", "id": 35, "avatar_url": "https://avatars.githubusercontent.com/u/35?v=4", "html_url": "https://github.com/user35", "contributions": 25 }, { "login": "user36", "id": 36, "avatar_url": "https://avatars.githubusercontent.com/u/36?v=4", "html_url": "https://github.com/user36", "contributions": 24 }, { "login": "user37", "id": 37, "avatar_url": "https://avatars.githubusercontent.com/u/37?v=4", "html_url": "https://github.com/user37", "contributions": 24 }, { "login": "user38", "id": 38, "avatar_url": "https://avatars.githubusercontent.com/u/38?v=4", "html_url": "https://github.com/user38", "contributions": 23 }, { "login": "user39", "id": 39, "avatar_url": "https://avatars.githubusercontent.com/u/39?v=4", "html_url": "https://github.com/user39", "contributions": 22 }, { "login": "user40", "id": 40, "avatar_url": "https://avatars.githubusercontent.com/u/40?v=4", "html_url": "https://github.com/user40", "contributions": 21 }, { "login": "user41", "id": 41, "avatar_url": "https://avatars.githubusercontent.com/u/41?v=4", "html_url": "https://github.com/user41", "contributions": 20 }, { "login": "user42", "id": 42, "avatar_url": "https://avatars.githubusercontent.com/u/42?v=4", "html_url": "https://github.com/user42", "contributions": 19 }, { "login": "user43", "id": 43, "avatar_url": "https://avatars.githubusercontent.com/u/43?v=4", "html_url": "https://github.com/user43", "contributions": 18 }, { "login": "user44", "id": 44, "avatar_url": "https://avatars.githubusercontent.com/u/44?v=4", "html_url": "https://github.com/user44", "contributions": 17 }, { "login": "user45", "id": 45, "avatar_url": "https://avatars.githubusercontent.com/u/45?v=4", "html_url": "https://github.com/user45", "contributions": 16 }, { "login": "user46", "id": 46, "avatar_url": "https://avatars.githubusercontent.com/u/46?v=4", "html_url": "https://github.com/user46", "contributions": 15 }, { "login": "user47", "id": 47, "avatar_url": "https://avatars.githubusercontent.com/u/47?v=4", "html_url": "https://github.com/user47", "contributions": 14 }, { "login": "user48", "id": 48, "avatar_url": "https://avatars.githubusercontent.com/u/48?v=4", "html_url": "https://github.com/user48", "contributions": 13 }, { "login": "user49", "id": 49, "avatar_url": "https://avatars.githubusercontent.com/u/49?v=4", "html_url": "https://github.com/user49", "contributions": 12 }, { "login": "user50", "id": 50, "avatar_url": "https://avatars.githubusercontent.com/u/50?v=4", "html_url": "https://github.com/user50", "contributions": 11 }, { "login": "user51", "id": 51, "avatar_url": "https://avatars.githubusercontent.com/u/51?v=4", "html_url": "https://github.com/user51", "contributions": 10 }, { "login": "user52", "id": 52, "avatar_url": "https://avatars.githubusercontent.com/u/52?v=4", "html_url": "https://github.com/user52", "contributions": 9 }, { "login": "user53", "id": 53, "avatar_url": "https://avatars.githubusercontent.com/u/53?v=4", "html_url": "https://github.com/user53", "contributions": 8 }, { "login": "user54", "id": 54, "avatar_url": "https://avatars.githubusercontent.com/u/54?v=4", "html_url": "https://github.com/user54", "contributions": 8 }, { "login": "user55", "id": 55, "avatar_url": "https://avatars.githubusercontent.com/u/55?v=4", "html_url": "https://github.com/user55", "contributions": 7 }, { "login": "user56", "id": 56, "avatar_url": "https://avatars.githubusercontent.com/u/56?v=4", "html_url": "https://github.com/user56", "contributions": 6 }, { "login": "user57", "id": 57, "avatar_url": "https://avatars.githubusercontent.com/u/57?v=4", "html_url": "https://github.com/user57", "contributions": 6 }, { "login": "user58", "id": 58, "avatar_url": "https://avatars.githubusercontent.com/u/58?v=4", "html_url": "https://github.com/user58", "contributions": 5 }, { "login": "user59", "id": 59, "avatar_url": "https://avatars.githubusercontent.com/u/59?v=4", "html_url": "https://github.com/user59", "contributions": 4 }, { "login": "user60", "id": 60, "avatar_url": "https://avatars.githubusercontent.com/u/60?v=4", "html_url": "https://github.com/user60", "contributions": 4 }, { "login": "user61", "id": 61, "avatar_url": "https://avatars.githubusercontent.com/u/61?v=4", "html_url": "https://github.com/user61", "contributions": 4 }, { "login": "user62", "id": 62, "avatar_url": "https://avatars.githubusercontent.com/u/62?v=4", "html_url": "https://github.com/user62", "contributions": 3 }, { "login": "user63", "id": 63, "avatar_url": "https://avatars.githubusercontent.com/u/63?v=4", "html_url": "https://github.com/user63", "contributions": 3 }, { "login": "user64", "id": 64, "avatar_url": "https://avatars.githubusercontent.com/u/64?v=4", "html_url": "https://github.com/user64", "contributions": 2 }, { "login": "user65", "id": 65, "avatar_url": "https://avatars.githubusercontent.com/u/65?v=4", "html_url": "https://github.com/user65", "contributions": 2 }, { "login": "user66", "id": 66, "avatar_url": "https://avatars.githubusercontent.com/u/66?v=4", "html_url": "https://github.com/user66", "contributions": 2 }, { "login": "user67", "id": 67, "avatar_url": "https://avatars.githubusercontent.com/u/67?v=4", "html_url": "https://github.com/user67", "contributions": 1 }, { "login": "user68", "id": 68, "avatar_url": "https://avatars.githubusercontent.com/u/68?v=4", "html_url": "https://github.com/user68", "contributions": 1 }, { "login": "user69", "id": 69, "avatar_url": "https://avatars.githubusercontent.com/u/69?v=4", "html_url": "https://github.com/user69", "contributions": 1 }, { "login": "user70", "id": 70, "avatar_url": "https://avatars.githubusercontent.com/u/70?v=4", "html_url": "https://github.com/user70", "contributions": 1 } ];
