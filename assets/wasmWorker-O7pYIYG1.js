(function(){"use strict";var de=(async function(i={}){var c,n=i,F=typeof window=="object",T=typeof WorkerGlobalScope<"u";typeof process=="object"&&process.versions?.node&&process.type!="renderer";var w="./this.program",j=self.location.href,d="";function H(e){return n.locateFile?n.locateFile(e,d):d+e}var N,W;if(F||T){try{d=new URL(".",j).href}catch{}T&&(W=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),N=async e=>{var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw new Error(r.status+" : "+r.url)}}console.log.bind(console);var A=console.error.bind(console),U,_=!1,p,R,M,h,I,K,O,g,Y,G,J,ee=!1;function re(){var e=M.buffer;h=new Int8Array(e),K=new Int16Array(e),n.HEAPU8=I=new Uint8Array(e),n.HEAP32=O=new Int32Array(e),g=new Uint32Array(e),Y=new Float32Array(e),G=new Float64Array(e),J=new BigInt64Array(e),new BigUint64Array(e)}function ye(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)ke(n.preRun.shift());te(ae)}function _e(){ee=!0,V.i()}function pe(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Se(n.postRun.shift());te(ne)}var P=0,C=null;function be(e){P++,n.monitorRunDependencies?.(P)}function we(e){if(P--,n.monitorRunDependencies?.(P),P==0&&C){var r=C;C=null,r()}}function L(e){n.onAbort?.(e),e="Aborted("+e+")",A(e),_=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw R?.(r),r}var X;function Ae(){return n.locateFile?H("index.wasm"):new URL("/Img2Num/assets/index-BrJbRdzp.wasm",self.location.href).href}function Re(e){if(e==X&&U)return new Uint8Array(U);if(W)return W(e);throw"both async and sync fetching of the wasm failed"}async function Ee(e){if(!U)try{var r=await N(e);return new Uint8Array(r)}catch{}return Re(e)}async function Te(e,r){try{var t=await Ee(e),a=await WebAssembly.instantiate(t,r);return a}catch(o){A(`failed to asynchronously prepare wasm: ${o}`),L(o)}}async function Ue(e,r,t){if(!e&&typeof WebAssembly.instantiateStreaming=="function")try{var a=fetch(r,{credentials:"same-origin"}),o=await WebAssembly.instantiateStreaming(a,t);return o}catch(f){A(`wasm streaming compile failed: ${f}`),A("falling back to ArrayBuffer instantiation")}return Te(r,t)}function Me(){return{a:er}}async function Pe(){function e(f,s){return V=f.exports,M=V.h,re(),xe(V),we(),V}be();function r(f){return e(f.instance)}var t=Me();if(n.instantiateWasm)return new Promise((f,s)=>{n.instantiateWasm(t,(l,m)=>{f(e(l))})});X??=Ae();var a=await Ue(U,X,t),o=r(a);return o}var te=e=>{for(;e.length>0;)e.shift()(n)},ne=[],Se=e=>ne.push(e),ae=[],ke=e=>ae.push(e);function Fe(e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":return h[e];case"i8":return h[e];case"i16":return K[e>>1];case"i32":return O[e>>2];case"i64":return J[e>>3];case"float":return Y[e>>2];case"double":return G[e>>3];case"*":return g[e>>2];default:L(`invalid type for getValue: ${r}`)}}function Ne(e,r,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":h[e]=r;break;case"i8":h[e]=r;break;case"i16":K[e>>1]=r;break;case"i32":O[e>>2]=r;break;case"i64":J[e>>3]=BigInt(r);break;case"float":Y[e>>2]=r;break;case"double":G[e>>3]=r;break;case"*":g[e>>2]=r;break;default:L(`invalid type for setValue: ${t}`)}}var We=e=>ve(e),Be=()=>me();class je{constructor(r){this.excPtr=r,this.ptr=r-24}set_type(r){g[this.ptr+4>>2]=r}get_type(){return g[this.ptr+4>>2]}set_destructor(r){g[this.ptr+8>>2]=r}get_destructor(){return g[this.ptr+8>>2]}set_caught(r){r=r?1:0,h[this.ptr+12]=r}get_caught(){return h[this.ptr+12]!=0}set_rethrown(r){r=r?1:0,h[this.ptr+13]=r}get_rethrown(){return h[this.ptr+13]!=0}init(r,t){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(t)}set_adjusted_ptr(r){g[this.ptr+16>>2]=r}get_adjusted_ptr(){return g[this.ptr+16>>2]}}var ie=0,He=(e,r,t)=>{var a=new je(e);throw a.init(r,t),ie=e,ie},Ie=()=>L(""),Ce=(e,r,t,a)=>{if(!(a>0))return 0;for(var o=t,f=t+a-1,s=0;s<e.length;++s){var l=e.codePointAt(s);if(l<=127){if(t>=f)break;r[t++]=l}else if(l<=2047){if(t+1>=f)break;r[t++]=192|l>>6,r[t++]=128|l&63}else if(l<=65535){if(t+2>=f)break;r[t++]=224|l>>12,r[t++]=128|l>>6&63,r[t++]=128|l&63}else{if(t+3>=f)break;r[t++]=240|l>>18,r[t++]=128|l>>12&63,r[t++]=128|l>>6&63,r[t++]=128|l&63,s++}}return r[t]=0,t-o},S=(e,r,t)=>Ce(e,I,r,t),$e=(e,r,t,a)=>{var o=new Date().getFullYear(),f=new Date(o,0,1),s=new Date(o,6,1),l=f.getTimezoneOffset(),m=s.getTimezoneOffset(),b=Math.max(l,m);g[e>>2]=b*60,O[r>>2]=+(l!=m);var y=z=>{var v=z>=0?"-":"+",E=Math.abs(z),tr=String(Math.floor(E/60)).padStart(2,"0"),nr=String(E%60).padStart(2,"0");return`UTC${v}${tr}${nr}`},D=y(l),B=y(m);m<l?(S(D,t,17),S(B,a,17)):(S(D,a,17),S(B,t,17))},Ve=()=>2147483648,De=(e,r)=>Math.ceil(e/r)*r,Oe=e=>{var r=M.buffer,t=(e-r.byteLength+65535)/65536|0;try{return M.grow(t),re(),1}catch{}},Le=e=>{var r=I.length;e>>>=0;var t=Ve();if(e>t)return!1;for(var a=1;a<=4;a*=2){var o=r*(1+.2/a);o=Math.min(o,e+100663296);var f=Math.min(t,De(Math.max(e,o),65536)),s=Oe(f);if(s)return!0}return!1},Z={},ze=()=>w||"./this.program",$=()=>{if(!$.strings){var e=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:ze()};for(var t in Z)Z[t]===void 0?delete r[t]:r[t]=Z[t];var a=[];for(var t in r)a.push(`${t}=${r[t]}`);$.strings=a}return $.strings},Ke=(e,r)=>{var t=0,a=0;for(var o of $()){var f=r+t;g[e+a>>2]=f,t+=S(o,f,1/0)+1,a+=4}return 0},Q=e=>{for(var r=0,t=0;t<e.length;++t){var a=e.charCodeAt(t);a<=127?r++:a<=2047?r+=2:a>=55296&&a<=57343?(r+=4,++t):r+=3}return r},Ye=(e,r)=>{var t=$();g[e>>2]=t.length;var a=0;for(var o of t)a+=Q(o)+1;return g[r>>2]=a,0},Ge=()=>e=>crypto.getRandomValues(e),se=e=>{(se=Ge())(e)},Je=(e,r)=>(se(I.subarray(e,e+r)),0),oe=e=>{var r=n["_"+e];return r},Xe=(e,r)=>{h.set(e,r)},fe=e=>ge(e),Ze=e=>{var r=Q(e)+1,t=fe(r);return S(e,t,r),t},ce=typeof TextDecoder<"u"?new TextDecoder:void 0,Qe=(e,r=0,t=NaN)=>{for(var a=r+t,o=r;e[o]&&!(o>=a);)++o;if(o-r>16&&e.buffer&&ce)return ce.decode(e.subarray(r,o));for(var f="";r<o;){var s=e[r++];if(!(s&128)){f+=String.fromCharCode(s);continue}var l=e[r++]&63;if((s&224)==192){f+=String.fromCharCode((s&31)<<6|l);continue}var m=e[r++]&63;if((s&240)==224?s=(s&15)<<12|l<<6|m:s=(s&7)<<18|l<<12|m<<6|e[r++]&63,s<65536)f+=String.fromCharCode(s);else{var b=s-65536;f+=String.fromCharCode(55296|b>>10,56320|b&1023)}}return f},le=(e,r)=>e?Qe(I,e,r):"",ue=(e,r,t,a,o)=>{var f={string:v=>{var E=0;return v!=null&&v!==0&&(E=Ze(v)),E},array:v=>{var E=fe(v.length);return Xe(v,E),E}};function s(v){return r==="string"?le(v):r==="boolean"?!!v:v}var l=oe(e),m=[],b=0;if(a)for(var y=0;y<a.length;y++){var D=f[t[y]];D?(b===0&&(b=Be()),m[y]=D(a[y])):m[y]=a[y]}var B=l(...m);function z(v){return b!==0&&We(b),s(v)}return B=z(B),B},qe=(e,r,t,a)=>{var o=!t||t.every(s=>s==="number"||s==="boolean"),f=r!=="string";return f&&o&&!a?oe(e):(...s)=>ue(e,r,t,s)};n.noExitRuntime&&n.noExitRuntime,n.print&&n.print,n.printErr&&(A=n.printErr),n.wasmBinary&&(U=n.wasmBinary),n.arguments&&n.arguments,n.thisProgram&&(w=n.thisProgram),n.ccall=ue,n.cwrap=qe,n.setValue=Ne,n.getValue=Fe,n.UTF8ToString=le,n.stringToUTF8=S,n.lengthBytesUTF8=Q;var ve,ge,me;function xe(e){n._gaussian_blur_fft=e.j,n._invert_image=e.k,n._threshold_image=e.l,n._black_threshold_image=e.m,n._kmeans=e.n,n._bilateral_filter=e.o,n._labels_to_svg=e.p,n._malloc=e.q,n._free=e.r,ve=e.s,ge=e.t,me=e.u}var er={a:He,f:Ie,c:$e,g:Le,d:Ke,e:Ye,b:Je},V=await Pe();function q(){if(P>0){C=q;return}if(ye(),P>0){C=q;return}function e(){n.calledRun=!0,!_&&(_e(),p?.(n),n.onRuntimeInitialized?.(),pe())}n.setStatus?(n.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>n.setStatus(""),1),e()},1)):e()}function rr(){if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.shift()()}return rr(),q(),ee?c=n:c=new Promise((e,r)=>{p=e,R=r}),c});let u,x;const he=new Promise(i=>x=i);de().then(i=>{u=i,x()});const k={void:{},Int32Array:{alloc:i=>{const c=u._malloc(i.byteLength);return u.HEAP32.set(i,c/4),c},read:(i,c)=>new Int32Array(u.HEAP32.buffer,i,c).slice()},Uint8Array:{alloc:i=>{const c=u._malloc(i.byteLength);return u.HEAPU8.set(i,c),c},read:(i,c)=>new Uint8Array(u.HEAPU8.subarray(i,i+c)).slice()},Uint8ClampedArray:{alloc:i=>{const c=u._malloc(i.byteLength);return u.HEAPU8.set(i,c),c},read:(i,c)=>new Uint8ClampedArray(u.HEAPU8.subarray(i,i+c)).slice()},string:{alloc:i=>{const c=u.lengthBytesUTF8(i)+1,n=u._malloc(c);return u.stringToUTF8(i,n,c),n},read:i=>i?u.UTF8ToString(i):null}};self.onmessage=async({data:i})=>{await he;const{id:c,funcName:n,args:F,bufferKeys:T,returnType:w}=i;if(n==null){self.postMessage({id:c,error:"Img2Num wasmWorker.js: call missing funcName"});return}if(F==null){self.postMessage({id:c,error:"Img2Num wasmWorker.js: call missing args object"});return}if(T==null){self.postMessage({id:c,error:"Img2Num wasmWorker.js: call missing bufferKeys array"});return}if(w==null){self.postMessage({id:c,error:"Img2Num wasmWorker.js: call missing returnType"});return}if(T?.length&&!F)throw new Error(`WASM call "${n}" has bufferKeys defined but no args object provided. Each bufferKey must correspond to a key in args.`);const j=new Map;try{const d=new Map(F?Object.entries(F):[]);T?.forEach(({key:_,type:p})=>{if(!(p in k))throw new Error(`Unsupported type: ${p}`);const R=d.get(_),M=k[p].alloc(R);j.set(_,{ptr:M,type:p,length:R?.length}),d.set(_,M)});const H=`_${n}`;if(typeof u[H]!="function")throw new Error(`Export not found: ${H}`);const N=u[H](...d.values()),W=new Map;T?.forEach(({key:_,type:p})=>{const R=j.get(_);W.set(_,k[p].read(R.ptr,R.length))});let A=N;w&&k[w]!==k.void&&(A=k[w].read(N)),w==="string"&&u._free(N);const U=Object.fromEntries(W);self.postMessage({id:c,output:U,returnValue:A})}catch(d){self.postMessage({id:c,error:d.message})}finally{for(const{ptr:d}of j.values())u._free(d)}}})();
