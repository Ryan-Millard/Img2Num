import{S as J,p as B,r as R,s as I,a as E,n as k,i as F,b as G,t as ae,c as M,f as oe,d as he,e as W,g as w,h as ce,j as b,k as ue,u as X,l as n,G as C,H as le}from"./index-CCFnj9_h.js";var N=class extends J{constructor(e,t){super(),this.options=t,this.#s=e,this.#a=null,this.#n=B(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#u=void 0;#t=void 0;#r;#i;#n;#a;#f;#l;#d;#h;#c;#o;#b=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),$(this.#e,this.options)?this.#p():this.updateResult(),this.#R())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return U(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return U(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#x(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,s=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof R(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#O(),this.#e.setOptions(this.options),t._defaulted&&!I(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&z(this.#e,s,this.options,t)&&this.#p(),this.updateResult(),r&&(this.#e!==s||R(this.options.enabled,this.#e)!==R(t.enabled,this.#e)||E(this.options.staleTime,this.#e)!==E(t.staleTime,this.#e))&&this.#g();const i=this.#m();r&&(this.#e!==s||R(this.options.enabled,this.#e)!==R(t.enabled,this.#e)||i!==this.#o)&&this.#y(i)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),s=this.createResult(t,e);return fe(this,s)&&(this.#t=s,this.#i=this.options,this.#r=this.#e.state),s}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#n.status==="pending"&&this.#n.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,r))})}trackProp(e){this.#b.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),s=this.#s.getQueryCache().build(this.#s,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#p({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#p(e){this.#O();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(k)),t}#g(){this.#v();const e=E(this.options.staleTime,this.#e);if(F||this.#t.isStale||!G(e))return;const s=ae(this.#t.dataUpdatedAt,e)+1;this.#h=M.setTimeout(()=>{this.#t.isStale||this.updateResult()},s)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(e){this.#x(),this.#o=e,!(F||R(this.options.enabled,this.#e)===!1||!G(this.#o)||this.#o===0)&&(this.#c=M.setInterval(()=>{(this.options.refetchIntervalInBackground||oe.isFocused())&&this.#p()},this.#o))}#R(){this.#g(),this.#y(this.#m())}#v(){this.#h&&(M.clearTimeout(this.#h),this.#h=void 0)}#x(){this.#c&&(M.clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const s=this.#e,r=this.options,i=this.#t,u=this.#r,h=this.#i,a=e!==s?e.state:this.#u,{state:d}=e;let o={...d},f=!1,l;if(t._optimisticResults){const m=this.hasListeners(),Q=!m&&$(e,t),O=m&&z(e,s,t,r);(Q||O)&&(o={...o,...he(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:S,errorUpdatedAt:j,status:p}=o;l=o.data;let y=!1;if(t.placeholderData!==void 0&&l===void 0&&p==="pending"){let m;i?.isPlaceholderData&&t.placeholderData===h?.placeholderData?(m=i.data,y=!0):m=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,m!==void 0&&(p="success",l=W(i?.data,m,t),f=!0)}if(t.select&&l!==void 0&&!y)if(i&&l===u?.data&&t.select===this.#f)l=this.#l;else try{this.#f=t.select,l=t.select(l),l=W(i?.data,l,t),this.#l=l,this.#a=null}catch(m){this.#a=m}this.#a&&(S=this.#a,l=this.#l,j=Date.now(),p="error");const g=o.fetchStatus==="fetching",x=p==="pending",D=p==="error",q=x&&g,A=l!==void 0,v={status:p,fetchStatus:o.fetchStatus,isPending:x,isSuccess:p==="success",isError:D,isInitialLoading:q,isLoading:q,data:l,dataUpdatedAt:o.dataUpdatedAt,error:S,errorUpdatedAt:j,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>a.dataUpdateCount||o.errorUpdateCount>a.errorUpdateCount,isFetching:g,isRefetching:g&&!x,isLoadingError:D&&!A,isPaused:o.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:D&&A,isStale:H(e,t),refetch:this.refetch,promise:this.#n,isEnabled:R(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const m=_=>{v.status==="error"?_.reject(v.error):v.data!==void 0&&_.resolve(v.data)},Q=()=>{const _=this.#n=v.promise=B();m(_)},O=this.#n;switch(O.status){case"pending":e.queryHash===s.queryHash&&m(O);break;case"fulfilled":(v.status==="error"||v.data!==O.value)&&Q();break;case"rejected":(v.status!=="error"||v.error!==O.reason)&&Q();break}}return v}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#i=this.options,this.#r.data!==void 0&&(this.#d=this.#e),I(t,e))return;this.#t=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#b.size)return!0;const u=new Set(i??this.#b);return this.options.throwOnError&&u.add("error"),Object.keys(this.#t).some(h=>{const c=h;return this.#t[c]!==e[c]&&u.has(c)})};this.#C({listeners:s()})}#O(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#u=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#R()}#C(e){w.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function de(e,t){return R(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function $(e,t){return de(e,t)||e.state.data!==void 0&&U(e,t,t.refetchOnMount)}function U(e,t,s){if(R(t.enabled,e)!==!1&&E(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&H(e,t)}return!1}function z(e,t,s,r){return(e!==t||R(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&H(e,s)}function H(e,t){return R(t.enabled,e)!==!1&&e.isStaleByTime(E(t.staleTime,e))}function fe(e,t){return!I(e.getCurrentResult(),t)}function K(e,t){const s=new Set(t);return e.filter(r=>!s.has(r))}function pe(e,t,s){const r=e.slice(0);return r[t]=s,r}var be=class extends J{#s;#e;#u;#t;#r;#i;#n;#a;#f=[];constructor(e,t,s){super(),this.#s=e,this.#t=s,this.#u=[],this.#r=[],this.#e=[],this.setQueries(t)}onSubscribe(){this.listeners.size===1&&this.#r.forEach(e=>{e.subscribe(t=>{this.#c(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#r.forEach(e=>{e.destroy()})}setQueries(e,t){this.#u=e,this.#t=t,w.batch(()=>{const s=this.#r,r=this.#h(this.#u);this.#f=r,r.forEach(o=>o.observer.setOptions(o.defaultedQueryOptions));const i=r.map(o=>o.observer),u=i.map(o=>o.getCurrentResult()),h=s.length!==i.length,c=i.some((o,f)=>o!==s[f]),a=h||c,d=a?!0:u.some((o,f)=>{const l=this.#e[f];return!l||!I(o,l)});!a&&!d||(a&&(this.#r=i),this.#e=u,this.hasListeners()&&(a&&(K(s,i).forEach(o=>{o.destroy()}),K(i,s).forEach(o=>{o.subscribe(f=>{this.#c(o,f)})})),this.#o()))})}getCurrentResult(){return this.#e}getQueries(){return this.#r.map(e=>e.getCurrentQuery())}getObservers(){return this.#r}getOptimisticResult(e,t){const s=this.#h(e),r=s.map(i=>i.observer.getOptimisticResult(i.defaultedQueryOptions));return[r,i=>this.#d(i??r,t),()=>this.#l(r,s)]}#l(e,t){return t.map((s,r)=>{const i=e[r];return s.defaultedQueryOptions.notifyOnChangeProps?i:s.observer.trackResult(i,u=>{t.forEach(h=>{h.observer.trackProp(u)})})})}#d(e,t){return t?((!this.#i||this.#e!==this.#a||t!==this.#n)&&(this.#n=t,this.#a=this.#e,this.#i=ce(this.#i,t(e))),this.#i):e}#h(e){const t=new Map(this.#r.map(r=>[r.options.queryHash,r])),s=[];return e.forEach(r=>{const i=this.#s.defaultQueryOptions(r),u=t.get(i.queryHash);u?s.push({defaultedQueryOptions:i,observer:u}):s.push({defaultedQueryOptions:i,observer:new N(this.#s,i)})}),s}#c(e,t){const s=this.#r.indexOf(e);s!==-1&&(this.#e=pe(this.#e,s,t),this.#o())}#o(){if(this.hasListeners()){const e=this.#i,t=this.#l(this.#e,this.#f),s=this.#d(t,this.#t?.combine);e!==s&&w.batch(()=>{this.listeners.forEach(r=>{r(this.#e)})})}}},Y=b.createContext(!1),Z=()=>b.useContext(Y);Y.Provider;function ge(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var me=b.createContext(ge()),ee=()=>b.useContext(me),te=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},se=e=>{b.useEffect(()=>{e.clearReset()},[e])},re=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||ue(s,[e.error,r])),ie=e=>{if(e.suspense){const s=i=>i==="static"?i:Math.max(i??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...i)=>s(r(...i)):s(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},ne=(e,t)=>e.isLoading&&e.isFetching&&!t,L=(e,t)=>e?.suspense&&t.isPending,P=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function V({queries:e,...t},s){const r=X(),i=Z(),u=ee(),h=b.useMemo(()=>e.map(p=>{const y=r.defaultQueryOptions(p);return y._optimisticResults=i?"isRestoring":"optimistic",y}),[e,r,i]);h.forEach(p=>{ie(p),te(p,u)}),se(u);const[c]=b.useState(()=>new be(r,h,t)),[a,d,o]=c.getOptimisticResult(h,t.combine),f=!i&&t.subscribed!==!1;b.useSyncExternalStore(b.useCallback(p=>f?c.subscribe(w.batchCalls(p)):k,[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setQueries(h,t)},[h,t,c]);const S=a.some((p,y)=>L(h[y],p))?a.flatMap((p,y)=>{const g=h[y];if(g){const x=new N(r,g);if(L(g,p))return P(g,x,u);ne(p,i)&&P(g,x,u)}return[]}):[];if(S.length>0)throw Promise.all(S);const j=a.find((p,y)=>{const g=h[y];return g&&re({result:p,errorResetBoundary:u,throwOnError:g.throwOnError,query:r.getQueryCache().get(g.queryHash),suspense:g.suspense})});if(j?.error)throw j.error;return d(o())}function ye(e,t,s){const r=Z(),i=ee(),u=X(),h=u.defaultQueryOptions(e);u.getDefaultOptions().queries?._experimental_beforeQuery?.(h),h._optimisticResults=r?"isRestoring":"optimistic",ie(h),te(h,i),se(i);const c=!u.getQueryCache().get(h.queryHash),[a]=b.useState(()=>new t(u,h)),d=a.getOptimisticResult(h),o=!r&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(f=>{const l=o?a.subscribe(w.batchCalls(f)):k;return a.updateResult(),l},[a,o]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),b.useEffect(()=>{a.setOptions(h)},[h,a]),L(h,d))throw P(h,a,i);if(re({result:d,errorResetBoundary:i,throwOnError:h.throwOnError,query:u.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw d.error;return u.getDefaultOptions().queries?._experimental_afterQuery?.(h,d),h.experimental_prefetchInRender&&!F&&ne(d,r)&&(c?P(h,a,i):u.getQueryCache().get(h.queryHash)?.promise)?.catch(k).finally(()=>{a.updateResult()}),h.notifyOnChangeProps?d:a.trackResult(d)}function Re(e,t){return ye(e,N)}const ve="_container_1n7pn_1",xe={container:ve};function Oe(){return n.jsxs(C,{children:[n.jsx("h2",{children:"Project Credits"}),n.jsx("table",{children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Created by"}),n.jsx("td",{colSpan:"2",children:n.jsx("a",{href:"https://github.com/Ryan-Millard",target:"_blank",children:"Ryan Millard"})})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Related URLs"}),n.jsx("td",{children:n.jsx("a",{href:"https://github.com/Ryan-Millard/Img2Num",target:"_blank",children:"GitHub Repository"})}),n.jsx("td",{children:n.jsx("a",{href:"https://ryan-millard.github.io/Img2Num/",target:"_blank",children:"Website on GitHub Pages"})})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Media"}),n.jsx("td",{children:"An image or something"}),n.jsx("td",{children:"Image authors credited individually"})]})]})})]})}const T=10080*60*1e3;function Ce(){const[e,t]=b.useState([]),[s,r]=b.useState([]);b.useEffect(()=>{fetch("https://raw.githubusercontent.com/Ryan-Millard/Img2Num/main/package.json").then(a=>a.json()).then(a=>{t(Object.entries(a.dependencies||{})),r(Object.entries(a.devDependencies||{}))})},[]);const i=V({queries:e.map(([c,a])=>({queryKey:["dependency",c],queryFn:async()=>{const o=await(await fetch(`https://registry.npmjs.org/${c}`)).json(),f=o.repository?.url?.replace(/^git\+/,"").replace(/\.git$/,"")||o.homepage||"";return{name:c,version:a,url:f}},staleTime:T,cacheTime:T}))}),u=V({queries:s.map(([c,a])=>({queryKey:["dependency",c],queryFn:async()=>{const o=await(await fetch(`https://registry.npmjs.org/${c}`)).json(),f=o.repository?.url?.replace(/^git\+/,"").replace(/\.git$/,"")||o.homepage||"";return{name:c,version:a,url:f}},staleTime:T,cacheTime:T}))}),h=(c,a)=>n.jsx("table",{children:n.jsx("tbody",{children:c.map(([d,o],f)=>{const l=a[f]?.data||{url:null};return n.jsxs("tr",{children:[n.jsx("td",{children:d}),n.jsx("td",{children:o}),n.jsx("td",{children:a[f]?.isLoading?"Loading...":l.url?n.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",children:l.url}):"No URL"})]},`${d}-${f}`)})})});return n.jsxs(n.Fragment,{children:[n.jsxs(C,{children:[n.jsx("h2",{children:"Dependencies"}),h(e,i)]}),n.jsxs(C,{children:[n.jsx("h2",{children:"Dev Dependencies"}),h(s,u)]})]})}const Se="_contributorsGrid_194zy_1",je={contributorsGrid:Se},Ee=async()=>{const e=await fetch("https://api.github.com/repos/Ryan-Millard/Img2Num/contributors?per_page=78");if(!e.ok)throw new Error("Failed to fetch contributors");return e.json()};function we(){const{data:e=[],isLoading:t,isError:s}=Re({queryKey:["contributors"],queryFn:Ee,staleTime:6048e5,cacheTime:6048e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),u=((h,c)=>Array.from({length:Math.ceil(h.length/c)},(a,d)=>h.slice(d*c,d*c+c)))(e,13);return t?n.jsx(C,{children:"Loading contributorsâ€¦"}):s?n.jsx(C,{children:"Failed to load contributors"}):n.jsxs(C,{children:[n.jsx("h2",{children:"Contributors"}),n.jsx("div",{className:je.contributorsGrid,children:u.map((h,c)=>n.jsx("table",{children:n.jsx("tbody",{children:h.map(a=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("a",{href:a.html_url,target:"_blank",rel:"noopener noreferrer",children:n.jsx("img",{src:a.avatar_url,alt:a.login,width:"28",height:"28",style:{borderRadius:"50%"}})})}),n.jsx("td",{children:n.jsx("a",{href:a.html_url,target:"_blank",rel:"noopener noreferrer",children:a.login})}),n.jsxs("td",{children:[a.contributions," commits"]})]},a.id))})},c))})]})}function Me(){return n.jsxs("div",{className:xe.container,children:[n.jsx(le,{header:"Credits",description:"Here you can find the contributors, libraries, and resources that made this project possible."}),n.jsxs("div",{className:"flex-column gap-lg",children:[n.jsx(we,{}),n.jsx(Oe,{}),n.jsx(Ce,{})]})]})}export{Me as default};
